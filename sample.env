# -----------------------------------------------------------------------------
# PG Rocket sample environment file
# Copy this file to .env and replace all "replace-me" values.
# -----------------------------------------------------------------------------

# Enable backup+archive setup in entrypoint.
# true  = configure pgBackRest + cron + Telegram notifications
# false = run as plain PostGIS/PostgreSQL container
ENABLE_DB_BACKUP=true

# Logical name used in backup repository path: /pg/<STACK_NAME>/<POSTGRES_DB>
STACK_NAME=rocket-local

# PostgreSQL bootstrap credentials/database
POSTGRES_DB=testdb
POSTGRES_USER=testuser
POSTGRES_PASSWORD=replace-me

# S3-compatible storage config for pgBackRest repository
S3_ENDPOINT=s3.us-east-1.wasabisys.com
S3_BUCKET=replace-me
S3_KEY=replace-me
S3_SECRET=replace-me
S3_REGION=us-east-1

# Telegram alerting for backup success/failure
TELEGRAM_BOT_TOKEN=replace-me
TELEGRAM_CHAT_ID=replace-me

# Cron schedule for backup.sh (default example: every Tuesday at 03:00 UTC)
BACKUP_CRON='0 3 * * 2'

# Number of full backups to retain in repo
BACKUP_RETAIN_COUNT=1

# Retry policy for backup.sh
MAX_RETRIES=5
RETRY_SLEEP_SECONDS=60

# Startup wait for cluster to leave recovery mode before post-start backup setup
PRIMARY_READY_TIMEOUT_SECONDS=300

# pgBackRest lock path (must be writable by postgres)
PGBACKREST_LOCK_PATH=/tmp/pgbackrest

# Auto initialize empty PGDATA.
# Set to 1 to initialize automatically.
# Leave unset for manual-restore-first behavior.
# PG_AUTO_INIT=1
